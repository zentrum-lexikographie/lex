#!/usr/bin/env python

from pathlib import Path

import clj

project_dir = (Path(__file__) / '..' / '..').resolve()

# Git tags --> version.edn
clj.run(['-A:version'], cwd=(project_dir / 'build').as_posix(), check=True)

# RNC --> RNG/Schematron
clj.run(['-A:schema'], cwd=(project_dir / 'build').as_posix(), check=True)

# Plugin for OxygenXML Editor
clj.run(['-A:dev:prod:uberjar'], cwd=(project_dir / 'client').as_posix(), check=True)

# Server component
clj.run(['-A:dev:prod:uberjar'], cwd=(project_dir / 'server').as_posix(), check=True)
